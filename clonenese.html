<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Clonenese Translator</title>
<style>
  :root { --bg:#0b0f14; --fg:#eaf2ff; --mut:#96a3b3; --acc:#6df; --card:#111823; }
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--fg);}
  .wrap{max-width:900px;margin:24px auto;padding:16px;}
  h1{font-size:1.5rem;margin:0 0 12px}
  .grid{display:grid;gap:12px}
  @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
  .card{background:var(--card);border:1px solid #1c2533;border-radius:16px;padding:14px}
  textarea{width:100%;min-height:180px;background:#0e141d;border:1px solid #1e293b;color:var(--fg);
    border-radius:12px;padding:12px;font-size:15px;resize:vertical}
  .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  button{background:var(--acc);color:#002233;border:0;padding:10px 14px;border-radius:12px;
    font-weight:700;cursor:pointer}
  button.secondary{background:#1b2533;color:var(--fg);border:1px solid #2a3952}
  .meta{font-size:12px;color:var(--mut);margin-top:8px}
  code{background:#0f1622;border:1px solid #1e2a3d;padding:2px 6px;border-radius:6px}
  .map{font-family:ui-monospace,Consolas,monospace;font-size:12px;white-space:pre-wrap}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Clonenese Translator ⚡</h1>
    <div class="grid">
      <div class="card">
        <h3>English → Clonenese</h3>
        <textarea id="enIn" placeholder="Type English here…"></textarea>
        <div class="row">
          <button onclick="toClone()">Translate →</button>
          <button class="secondary" onclick="copyOut('enOut')">Copy Output</button>
          <button class="secondary" onclick="swap('enIn','enOut')">Swap</button>
        </div>
        <textarea id="enOut" placeholder="Clonenese output…" readonly></textarea>
      </div>
      <div class="card">
        <h3>Clonenese → English</h3>
        <textarea id="clIn" placeholder="Type Clonenese here…"></textarea>
        <div class="row">
          <button onclick="toEnglish()">Translate →</button>
          <button class="secondary" onclick="copyOut('clOut')">Copy Output</button>
          <button class="secondary" onclick="swap('clIn','clOut')">Swap</button>
        </div>
        <textarea id="clOut" placeholder="English output…" readonly></textarea>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <h3>Alphabet (v1.0)</h3>
      <div class="map" id="map"></div>
      <div class="meta">Greedy decode handles multi-digit tokens like <code>156</code>, <code>64</code>, <code>32</code>, <code>24</code>, <code>16</code>, <code>15</code>, <code>14</code>, and singles like <code>8</code>, <code>4</code>. Case-insensitive; non-letters pass through.</div>
    </div>
  </div>

<script>
const map = {
  a:"c", b:"l", c:"o", d:"n", e:"e", f:"i", g:"u", h:"m", i:"s",
  j:"4", k:"v", l:"r", m:"8", n:"w", o:"16", p:"32", q:"64", r:"156",
  s:"t", t:"24", u:"15", v:"14", w:"y", x:"a", y:"b", z:"/"
};

// Build reverse map (token -> english letter)
const rev = {};
for (const [k,v] of Object.entries(map)) rev[v] = k;

// For reverse: known tokens, longest first to be greedy
const numericTokens = ["156","64","32","24","16","15","14","8","4"];
const letterTokens  = ["c","l","o","n","e","i","u","m","s","v","r","w","t","y","a","b","/"];
const allTokens = [...numericTokens, ...letterTokens].sort((a,b)=>b.length - a.length);

function toClone(){
  const s = document.getElementById('enIn').value;
  let out = "";
  for (const ch of s){
    const lower = ch.toLowerCase();
    if (map[lower]) {
      let token = map[lower];
      // preserve case only for single-letter outputs
      if (token.length === 1 && /[a-z]/i.test(ch) && ch === ch.toUpperCase()){
        token = token.toUpperCase();
      }
      out += token;
    } else {
      out += ch;
    }
  }
  document.getElementById('enOut').value = out;
}

function toEnglish(){
  const s = document.getElementById('clIn').value;
  let i=0, out="";
  while (i < s.length){
    // Try to match any token greedily
    let matched = null, token = "";
    for (const tk of allTokens){
      if (s.substr(i, tk.length).toLowerCase() === tk){
        matched = true; token = tk; break;
      }
    }
    if (matched){
      const original = s.substr(i, token.length);
      let letter = rev[token];
      // restore uppercase if original was uppercase single-letter token
      if (token.length === 1 && original === original.toUpperCase()){
        letter = letter.toUpperCase();
      }
      out += letter;
      i += token.length;
    } else {
      // not a known token; pass one char through
      out += s[i];
      i += 1;
    }
  }
  document.getElementById('clOut').value = out;
}

function copyOut(id){
  const el = document.getElementById(id);
  el.select(); el.setSelectionRange(0, 99999);
  navigator.clipboard?.writeText(el.value);
}

function swap(a,b){
  const A = document.getElementById(a), B = document.getElementById(b);
  const tmp = A.value; A.value = B.value; B.value = tmp;
}

(function renderMap(){
  const lines = Object.entries(map)
    .sort((a,b)=>a[0].localeCompare(b[0]))
    .map(([k,v]) => `${k} → ${v}`).join('   ');
  document.getElementById('map').textContent = lines;
})();
</script>
</body>
</html>